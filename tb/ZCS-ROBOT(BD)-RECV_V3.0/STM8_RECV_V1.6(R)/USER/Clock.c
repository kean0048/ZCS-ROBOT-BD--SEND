/******************************************************************************/
/*					                                      */
/*	Project Name :	接收机		                                      */
/*	Version      :	1.0			                              */
/*	MCU          :	ST 8-bit STM8S104K4T6C	                              */
/*	Clock        :	16MHz			                              */
/*	Author	     :	mengzhuozhuo   		                              */
/*      Date	     :	2016/04/26	                                      */
/*	Corporation  :	中惠创智（深圳）无线供电技术有限公司                   */
/*						                              */
/******************************************************************************/
/*******************************************************************************
-----------------------------     File start    --------------------------------
*******************************************************************************/


/*******************************************************************************
-----------------------------    Include files   -------------------------------
*******************************************************************************/
#include "type_def.h"

unsigned int CNT_Relay_Test;
//******************************************************************************
//时钟函数
//******************************************************************************
void Clock(void)//时间
{
//***********************************************
//等待一定时间进入下一阶段
    if(Flag_10ms_A==1)
    {
        Flag_10ms_A=0;
        if(Flag_PHCEn)
        {
            if(CNT_PHeat < 6500)
            {
                CNT_PHeat++;
            }
        }
    }
//***********************************************
//进入供电状态2分钟后检测NTC开路异常 
    if(Flag_10ms_I ==1)
    {
        Flag_10ms_I =0;
        if(MacStatus == C_MSWork)
        {
            CNT_T2min++;
            if(CNT_T2min >= 12000)
            {
                Flag_NTCOpen_Check_EN =1;
                CNT_T2min =0;
            }
        }
        else
        {
           Flag_NTCOpen_Check_EN =0;
           CNT_T2min =0;
        }
    } 
//***********************************************
//保密功能计时1小时
    if(Flag_10ms_G ==1)
    {
        Flag_10ms_G =0;
        CNT_T1min++;
        if(CNT_T1min >= 6000)
        {
            CNT_T1min =0;
            CNT_T1hour++;
            if(CNT_T1hour >= 60)
            {
                CNT_T1hour =0;
                Flag_1hour_A =1;
            }
        }
        //充电计时功能
        CNT_TrickleCharge++;
        if(CNT_TrickleCharge>=10000) CNT_TrickleCharge=0;
    } 
}
/*******************************************************************************
-----------------------------    End of file    --------------------------------
*******************************************************************************/