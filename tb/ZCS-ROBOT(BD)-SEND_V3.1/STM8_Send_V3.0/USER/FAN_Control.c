/******************************************************************************/
/*					                                      */
/*	Project Name :	发射机		                                      */
/*	Version      :	1.0			                              */
/*	MCU          :	ST 8-bit STM8S104K4T6C	                              */
/*	Clock        :	16MHz			                              */
/*	Author	     :	mengzhuozhuo   		                              */
/*      Date	     :	2016/04/26	                                      */
/*	Corporation  :	中惠创智（深圳）无线供电技术有限公司                   */
/*						                              */
/******************************************************************************/
/*******************************************************************************
-----------------------------     File start    --------------------------------
*******************************************************************************/


/*******************************************************************************
-----------------------------    Include files   -------------------------------
*******************************************************************************/
#include "iostm8s105c6.h"
#include "RAM.h"
#include "FAN_Control.h"

//******************************************************************************
/*风扇控制*/
//******************************************************************************
void  FAN_Control(void)
{
    if(Time1_Work_cycle > 0)
    {
        Fan_Open();
    }
    else
    {
        Fan_Close();
    }
}
//******************************************************************************


//******************************************************************************
/*打开风扇*/
//******************************************************************************
void  Fan_Open(void)
{
    PD_ODR_ODR3 = 1;
    Flag_Fan_Open = 1;
}
//******************************************************************************


//******************************************************************************
/*关闭风扇*/
//******************************************************************************
void  Fan_Close(void)
{
    PD_ODR_ODR3 = 0;
    Flag_Fan_Open = 0;
}
//******************************************************************************


//******************************************************************************
/*根据温度控制风扇*/
//******************************************************************************
void  Fan_Adjust_Temp(void)
{
    if(ACTemp_DD >= C_Maximum_Temp1)
    {
        Fan_Open();
    }
    else if(ACTemp_DD <= C_Minimum_Temp1)
    {
        Fan_Close();
    }     
}
//******************************************************************************


//******************************************************************************
/*根据时间控制风扇*/
//******************************************************************************
void  Fan_Adjust_Time(void)
{
      if(Flag_Fan_First ==1)
      {
           if(CNT_Fan_Open < C_Fan_Close)
           {
                CNT_Fan_Open++;
           }
           else
           {
                Flag_Fan_First =0;
           }           
      }
      else
      {
          Fan_Close();
      }
}
/*******************************************************************************
-----------------------------    End of file    --------------------------------
*******************************************************************************/